<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>CryptoRiskMonitor • Dashboard</title>

  <style>
    body{
      margin:0;
      min-height:100vh;
      background: linear-gradient(135deg, #0e1117, #0b3c3c);
      font-family: Arial, sans-serif;
      color:#eaecef;
    }

    body::before{
      content:"";
      position:fixed;
      inset:0;
      background-image:
        url("https://cryptologos.cc/logos/bitcoin-btc-logo.png"),
        url("https://cryptologos.cc/logos/ethereum-eth-logo.png"),
        url("https://cryptologos.cc/logos/solana-sol-logo.png"),
        url("https://cryptologos.cc/logos/chainlink-link-logo.png"),
        url("https://cryptologos.cc/logos/uniswap-uni-logo.png");
      background-size:120px, 90px, 100px, 90px, 80px;
      background-position:
        10% 20%,
        80% 30%,
        50% 80%,
        20% 70%,
        70% 60%;
      background-repeat:no-repeat;
      opacity:0.16;
      animation: float 8s ease-in-out infinite;
      pointer-events:none;
    }

    @keyframes float{
      0%{ transform:translateY(0); }
      50%{ transform:translateY(-40px); }
      100%{ transform:translateY(0); }
    }

    .container{
      width:960px;
      margin:60px auto;
      padding:0 16px;
    }

    h1{
      margin:0;
      color:#4fd1c5;
      font-size:32px;
    }

    .sub{
      opacity:.8;
      margin:6px 0 24px 0;
      font-size:16px;
    }

    .panel{
      background:#151922;
      border:1px solid #2a2e39;
      border-radius:16px;
      padding:20px;
      box-shadow:0 20px 40px rgba(0,0,0,.4);
    }

    .row{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
    }

    select,input{
      background:#0e1117;
      border:1px solid #2a2e39;
      color:#eaecef;
      padding:12px;
      border-radius:10px;
      outline:none;
      min-width:180px;
    }

    input::placeholder{ opacity:.6; }

    button{
      padding:12px 22px;
      background:#4fd1c5;
      border:none;
      border-radius:10px;
      font-weight:bold;
      cursor:pointer;
    }

    button:hover{ filter:brightness(1.05); }

    table{
      width:100%;
      border-collapse: collapse;
      margin-top:20px;
    }

    th,td{
      padding:12px 10px;
      border-bottom:1px solid #2a2e39;
      text-align:left;
    }

    th{
      color:#9aa4bf;
      font-weight:normal;
      font-size:13px;
    }

    .pill{
      display:inline-block;
      padding:5px 10px;
      border:1px solid #2a2e39;
      border-radius:999px;
      font-size:13px;
    }

    .right{ text-align:right; }
    .muted{ opacity:.6; }

    .top-actions{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:16px;
    }

    a{
      color:#4fd1c5;
      text-decoration:none;
      font-weight:700;
    }

    a:hover{ text-decoration:underline; }

    .divider{
      height:1px;
      background:#2a2e39;
      margin:18px 0;
    }
  </style>
</head>

<body>
<div class="container">

  <div class="top-actions">
    <div>
      <h1>Portfolio Dashboard</h1>
      <div class="sub">
        Total Value: <strong>${{ portfolio.total_value_usd }}</strong>
      </div>
    </div>
    <a href="{% url 'logout' %}">Logout</a>
  </div>

  <div class="panel">

    <!-- ADD ASSET -->
    <form method="POST">
      {% csrf_token %}
      <div class="row">

        <!-- SELECT (OPSİYONEL) -->
        <select name="symbol_select">
          <option value="">Choose coin (optional)</option>

          <option value="BTC">BTC (Bitcoin)</option>
          <option value="ETH">ETH (Ethereum)</option>

          <option value="SOL">SOL (Solana)</option>
          <option value="AVAX">AVAX (Avalanche)</option>
          <option value="ADA">ADA (Cardano)</option>
          <option value="DOT">DOT (Polkadot)</option>
          <option value="MATIC">MATIC (Polygon)</option>
          <option value="ARB">ARB (Arbitrum)</option>
          <option value="OP">OP (Optimism)</option>

          <option value="UNI">UNI (Uniswap)</option>
          <option value="AAVE">AAVE (Aave)</option>
          <option value="SNX">SNX (Synthetix)</option>
          <option value="CRV">CRV (Curve)</option>
          <option value="COMP">COMP (Compound)</option>

          <option value="LINK">LINK (Chainlink)</option>
          <option value="INJ">INJ (Injective)</option>
          <option value="RNDR">RNDR (Render)</option>
        </select>

        <!-- MANUAL -->
        <input
          type="text"
          name="symbol_manual"
          placeholder="Enter manually (e.g. INJ)"
          maxlength="12"
        />

        <input
          type="number"
          step="0.01"
          name="value_usd"
          placeholder="USD Value"
          required
        />

        <button type="submit">Add Asset</button>
      </div>
    </form>

    <div class="divider"></div>

    <!-- TABLE -->
    <table>
      <tr>
        <th>Asset</th>
        <th>USD</th>
        <th>Allocation %</th>
        <th class="right">Action</th>
      </tr>

      {% for asset in assets %}
      <tr>
        <td><span class="pill">{{ asset.symbol }}</span></td>
        <td>${{ asset.value_usd }}</td>
        <td>{{ asset.allocation_percent }}%</td>
        <td class="right">
          <form method="POST" action="{% url 'delete_asset' asset.id %}">
            {% csrf_token %}
            <button style="background:none;color:#4fd1c5;padding:0;">Delete</button>
          </form>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="4" class="muted">No assets yet.</td>
      </tr>
      {% endfor %}
    </table>

    <div style="margin-top:20px;">
      <a href="{% url 'detail' %}">→ View Risk Analysis</a>
    </div>

  </div>
</div>
</body>
</html>